(this["webpackJsonpgrid-battle"]=this["webpackJsonpgrid-battle"]||[]).push([[0],{27:function(e,t,a){e.exports=a.p+"static/media/ground.a82d3ec6.jpeg"},28:function(e,t,a){e.exports=a.p+"static/media/warrior.d8b023eb.png"},29:function(e,t,a){e.exports=a.p+"static/media/tree.f7e58740.png"},30:function(e,t,a){e.exports=a.p+"static/media/goblin_regular.a22efcb7.png"},37:function(e,t,a){e.exports=a(50)},47:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"updateGrid",(function(){return Q})),a.d(r,"createGrid",(function(){return Z})),a.d(r,"destroyGrid",(function(){return ee}));var n={};a.r(n),a.d(n,"startTurn",(function(){return te})),a.d(n,"nextMove",(function(){return ae})),a.d(n,"resetTurn",(function(){return re}));var i=a(0),l=a.n(i),s=a(4),o=a(16),d=a.n(o),c=(a(47),a(13)),p=a(11),u=a(1),m=a.n(u),h=a(2),g=a(27),f=a.n(g),y=a(28),b=a.n(y),x=a(29),C=a.n(x),w=a(30),v=a.n(w);const I=f.a,E={warrior:b.a,tree:C.a,goblin:v.a},k={black:"#252525",white:"#fff",whiteTransparent:"rgba(255, 255, 255, 0.8)",blue:"#007ce0",navy:"#004175",gray:"#5c5c5c50",greenTransparent:"#5ea56a",glassTransparent:"rgba(190,255,247, 0.6)",glass:"rgba(190,255,247, 0.8)",redTransparent:"#df4646"},T={standard:"2px 1px 5px 2px rgba(0, 0, 0, 0.4)",large:"5px 0px 10px 5px rgba(0, 0, 0, 0.8)",standardInset:"inset 1px 1px 5px -2px rgba(0, 0, 0, 0.8)",largeInset:"inset 1px 1px 20px -4px rgba(0, 0, 0, 0.8)",standarInsetWithColor:e=>`inset 1px 1px 20px -4px ${e}`},R="6px",S="20px",j=["425px"];j.sm=j[0];const _={small:`(min-width: ${j[0]})`},O="Lora",G="Lora-Bold";var N={colors:k,breakpoints:j,boxShadow:T};const q=h.c.div.withConfig({displayName:"PageWrapperStyle__Wrapper",componentId:"sc-1ro2fmk-0"})(["min-height:100vh;display:flex;flex-direction:column;background:url(",") center center/cover no-repeat;overflow:hidden;font-family:",";"],I,O),P=h.c.div.withConfig({displayName:"PageWrapperStyle__FooterWrapper",componentId:"sc-1ro2fmk-1"})(["margin-top:auto;background-color:",";box-shadow:",";border-radius:",";height:50px;padding:5px 20px;display:flex;position:relative;top:27px;font-size:14px;justify-content:center;"],k.whiteTransparent,T.standard,S),$=h.c.div.withConfig({displayName:"styledHeader__HeaderWrapper",componentId:"sc-1100p2l-0"})(["box-shadow:",";border-radius:",";position:relative;top:-20px;padding:30px 10px 10px 10px;background-color:",";max-height:142px;padding-bottom:0;@media ","{max-height:96px;padding-bottom:10px;}"],T.large,S,k.whiteTransparent,_.small),B=h.c.ul.withConfig({displayName:"styledHeader__HeaderList",componentId:"sc-1100p2l-1"})(["display:flex;justify-content:space-around;flex-wrap:wrap;@media ","{flex-wrap:nowrap;}"],_.small),H=h.c.div.withConfig({displayName:"StyledContainer",componentId:"sc-29a629-0"})(["max-width:1000px;margin:auto;padding:10px;width:100%;"]);var A={home:"/",battle:"/battle",about:"/about"};const J=h.c.div.withConfig({displayName:"styledButton__StyledButton",componentId:"intozn-0"})(["padding:5px 10px;background-color:",";min-width:100px;border-radius:",";box-shadow:",",0 0 0 rgba(255,255,255,0);transition:all 300ms ease-in-out;cursor:",";background-color:",";"," @media ","{margin-bottom:0;}"],k.white,R,T.standardInset,e=>e.disabled?"default":"pointer",e=>e.disabled?k.gray:"",e=>e.disabled?"":`  &:hover {\n    box-shadow: inset 0 0 0 rgba(255, 255, 255, 0), ${T.standard};\n  }`,_.small),z={primary:Object(h.c)(J).withConfig({displayName:"styledButton__StyledButtonPrimary",componentId:"intozn-1"})(["padding:10px 40px;margin-bottom:10px;"]),secondary:Object(h.c)(J).withConfig({displayName:"styledButton__StyledButtonSecondary",componentId:"intozn-2"})(["padding:7px 14px;"])},D=e=>{const{text:t,func:a,disabled:r,type:n}=e,i=z[n]||J;return l.a.createElement(i,{onClick:a,disabled:r},t)};D.propTypes={text:m.a.string,func:m.a.func,disabled:m.a.bool,type:m.a.string},D.defaultProps={text:"",func:()=>{},disabled:!1,type:""};var M=D;var W=e=>{let t=Object(p.f)().pathname;return l.a.createElement($,null,l.a.createElement(H,null,l.a.createElement("nav",null,l.a.createElement(B,null,l.a.createElement(c.b,{to:A.home},l.a.createElement(M,{type:"primary",disabled:t===A.home,text:"Home"})),l.a.createElement(c.b,{to:A.battle},l.a.createElement(M,{type:"primary",disabled:t===A.battle,text:"Battle"})),l.a.createElement(c.b,{to:A.about},l.a.createElement(M,{type:"primary",disabled:t===A.about,text:"About"}))))))};const L=e=>{const[t,a]=Object(i.useState)(!1);return l.a.createElement(q,{onClick:()=>{!t&&a(!0)}},l.a.createElement(W,null),e.children,l.a.createElement(P,null,"Created by - Stefan Deak"))};L.propTypes={children:m.a.object},L.defaultProps={childrenchildren:{}};var U=Object(s.b)(e=>({}),e=>({}))(L);const X=h.c.div.withConfig({displayName:"StyledHome",componentId:"l871od-0"})(["min-height:calc(100vh - 200px);background-color:",";border-radius:",";box-shadow:",";display:flex;flex-direction:column;padding-bottom:40px;margin-bottom:-12px;h1{margin-top:80px;font-size:42px;text-align:center;width:100%;font-family:",";margin-bottom:40px;}p{margin-top:20px;font-size:22px;font-family:",";}"],k.whiteTransparent,S,T.standard,G,G);var F=e=>l.a.createElement(H,null,l.a.createElement(X,null,l.a.createElement("h1",null,"React.js Grid Battle"),l.a.createElement("p",null,"Welcome!"),l.a.createElement("p",null,"Battle AI in procedurally generated maps.")));var V=e=>l.a.createElement("div",null,l.a.createElement("h1",null,"Help page"));const Y=h.c.div.withConfig({displayName:"styledGrid__StyledGrid",componentId:"sc-1idlluh-0"})(["display:flex;flex-wrap:wrap;width:66.66%;box-shadow:",";border-radius:",";background-color:",";padding-top:",";overflow:hidden;"],T.standard,R,e=>e.empty?k.glassTransparent:"transparent",e=>e.empty?"66.66%":"0"),K=h.c.div.withConfig({displayName:"styledGrid__StyledGridWrapper",componentId:"sc-1idlluh-1"})(["display:flex;flex-wrap:wrap;"]),Q=(e,t)=>({type:"UPDATE_GRID",grid:e,gameId:t}),Z=(e,t)=>({type:"CREATE_GRID",settings:e,gameId:t}),ee=()=>({type:"DESTROY_GRID"}),te=(e,t)=>({type:"START_TURN",grid:e,gameId:t}),ae=(e,t)=>({type:"NEXT_MOVE",grid:e,gameId:t}),re=e=>({type:"RESET_TURN",gameId:e});var ne=a(10);const ie=(e,t)=>Math.floor(Math.random()*(t-e)+e),le=e=>new Promise(t=>{setTimeout(()=>{t()},e)}),se=(e,t,a)=>{let r=JSON.parse(JSON.stringify(e));return((e,t,a)=>{const r=[2,3,4,5,6,7,92,93,94,95,95,96,97,15,25,35,45,55,65,75,85];let n=[];for(let i=0;i<t.obstacles();++i){let e=ie(0,a*a-1);r.includes(e)?--i:n.push(e)}return console.log(n),n})(0,t,a).forEach(e=>{r[e].fill="X",r[e].image="tree",r[e].terrain="grass"}),t.characters.forEach(e=>{r[e.index].fill=e.fill,r[e.index].image=e.image,r[e.index].stats=e}),r},oe=(e,t)=>{const a=((e,t)=>{const a=ie(1,20),r=e.attack+a;return{isHit:r>=t.ac,attack:r,attackRoll:a,attackBonus:e.attack,defenderAC:t.ac}})(e,t);return{attackResult:a,damageResult:!!a.isHit&&((e,t)=>{const a=ie(e.damage[0],e.damage[1]),r=t.hp-a;return{isDead:r<=0,damage:a,hp:r}})(e,t)}},de=e=>e.map(e=>(e.path=0,e.direction=null,e)),ce={makeGrid:({rows:e,columns:t,fill:a})=>{let r=[];for(let n=0;n<e;++n)for(let e=0;e<t;++e)r.push({index:n*t+e,fill:"",adjecent:[],visited:0,path:0,image:"",terrain:"grass",animation:null,direction:null,sound:"click"});return r=((e,t,a)=>{let r=JSON.parse(JSON.stringify(e));return r.forEach((e,t)=>{let n=[],i=t-a;i>-1&&n.push({index:i,direction:"up"});let l=t+a;l<r.length&&n.push({index:l,direction:"down"});let s=t-1;s>=0&&t%a!==0&&n.push({index:s,direction:"left"});let o=t+1;o<r.length&&o%a!==0&&n.push({index:o,direction:"right"}),e.adjecent=n}),r})(r,0,t),r=se(r,a,e),Object(ne.a)(r)},startSearch:(e,t,a,r)=>{let n=e,i=n.toJS();const l=i[t].stats,s=i[a].stats&&i[a].stats.player!==l.player;if(n.get(a).fill&&!s||!t&&0!==t)return null;let o,d=((e,t,a)=>{let r,n=e.toJS(),i=[[n[t]]];const l=()=>{const e=[];return i.forEach(t=>{t[t.length-1].adjecent.forEach(i=>{if(n[i.index].index===a)r=t,n[i.index].direction=i.direction,r.push(n[i.index]);else if(0===n[i.index].visited&&!n[i.index].fill){n[i.index].visited=1;const a=JSON.parse(JSON.stringify(t));a.push(n[i.index]),a[a.length-1].direction=i.direction,e.push(a)}})}),e};let s=0;do{if(++s>299&&console.log("time out!"),i=l(),r)return r;if(0===i.length)return console.log("path impossible!"),!1}while(!r&&s<300)})(e,t,a),c=r.speed;return s&&d&&d.length<=r.speed+1&&(c=d.length>r.speed?r.speed:d.length-1,o=oe(l,i[a].stats)),d?(n=((e,t)=>{return de(e).withMutations(e=>{t.forEach(t=>{e.setIn([t.index,"path"],1)})})})(e,d=d.splice(0,c)),{grid:Object(ne.a)(n),result:d,attackResult:o}):null},clearPath:de,moveCharacter:(e,t,a)=>e.setIn([t.index,"fill"],"").setIn([t.index,"image"],"").setIn([t.index,"stats"],"").setIn([a.index,"image"],t.image).setIn([a.index,"fill"],t.fill).setIn([a.index,"stats"],t).setIn([a.index,"stats","index"],a.index),clearTile:(e,t)=>e.setIn([t,"image"],"").setIn([t,"stats"],"").setIn([t,"fill"],"").setIn([t,"sound"],"click"),updateCharacter:(e,t)=>e.setIn([t.index,"stats"],t.stats)},pe={up:"down",down:"up",left:"right",right:"left"},ue={moveAnimationBuilder:(e,t,a)=>{const r=a.attackResult;let n=" 0% {\n      top: 0%;\n      left: 0%;\n    }\n  ";const i=r?100/(e.length+3):100/e.length;let l,s=0,o=0;if(e.forEach((t,a)=>{l=e.length-1!==a||r?i*a:100,"up"===t.direction?s-=100:"down"===t.direction?s+=100:"left"===t.direction?o-=100:"right"===t.direction&&(o+=100),0!==a&&(n+=`\n        ${l}% {\n          top: ${s}%;\n          left: ${o}%;\n      }`)}),r){const t=e[e.length-1].adjecent.find(e=>e.index===a.defender.index).direction,r=pe[t],d=s,c=o;"up"===r?s-=50:"down"===r?s+=50:"left"===r?o-=50:"right"===r&&(o+=50),n+=`\n      ${l+=2*i}% {\n        top: ${s}%;\n        left: ${o}%;\n      }`,n+=`\n      ${l+=i/4}% {\n        top: ${s}%;\n        left: ${o}%;\n      }`,"up"===t?s-=90:"down"===t?s+=90:"left"===t?o-=90:"right"===t&&(o+=90),n+=`\n    ${l+=i/3}% {\n      top: ${s}%;\n      left: ${o}%;\n    }`,n+=`\n      100% {\n        top: ${d}%;\n        left: ${c}%;\n      }\n    `}return{animation:Object(h.d)(["",""],n),time:r?t*(e.length+3):t*(e.length-1)}},selected:Object(h.d)(["0%{transform:rotate(0deg);}33.2%{transform:rotate(-16deg);}83.18%{transform:rotate(8deg);}100%{transform:rotate(0deg);}"]),first:Object(h.d)(["0%{opacity:1;}50%{opacity:0;width:50px;min-width:50px;}100%{width:0px;min-width:0px;opacity:0;}"]),last:Object(h.d)(["0%{opacity:0;}100%{opacity:1;}"])},me=e=>{let t=JSON.parse(JSON.stringify(e));const a=t.shift();return[...t,a]},he={sortCharacters:(e,t="initiative")=>{return JSON.parse(JSON.stringify(e)).sort((e,a)=>a[t]-e[t])},setNextCharacter:me,findCharacters:e=>{const t=e.filter((e,t)=>"C"===e.fill).map(e=>e.stats),a=t.filter(e=>"human"===e.player),r=t.filter(e=>"ai"===e.player);return{allCharacters:t.toJS(),humanCharacters:a.toJS(),aiCharacters:r.toJS()}},updateCharacters:(e,t)=>{let a=me(e.turnInfo.get("allCharacters"));const{allCharacters:r,humanCharacters:n,aiCharacters:i}=he.findCharacters(t),l=r.map(e=>e.id);return{allCharacters:a=(a=a.filter(e=>l.includes(e.id))).map(e=>{const t=r.find(t=>t.id===e.id);return e=t}),aiCharacters:i,humanCharacters:n,activeCharacter:a[0]}}},ge=(e,t)=>e-t>0?100:-50,fe=(e,t)=>e-t<=0?200:0,ye=e=>10-e>0?20*(10-e):0,be=(e,t)=>10*(e+t),xe=(e,t,a)=>{let r=[],n=!1;return a.forEach(a=>{const i=ce.startSearch(e,t.index,a.index,t);i&&(r.push({result:i,index:a.index,target:a,stats:t}),!n&&i.attackResult&&(n=!0))}),n&&(r=r.filter(e=>e.result.attackResult)),(e=>{return e.map(e=>{const t=e.stats,a=e.target;let r=0,n={},i=0;const l=ge(t.attack,a.ac);i+=l,n.toHitChance=l;const s=ye(a.hp);i+=s,n.remainingHP=s;const o=fe(a.hp,t.damage[1]);i+=o,n.canKill=o;const d=be(a.attack,a.damage[1]);return i+=d,n.threatLevel=d,r+=i,{...e,weight:i,calculatedWeight:r,weightBreakdown:n}})})(r)},Ce=(e,t,a)=>{const r=xe(e,t,a);return r.length>0?(e=>{const t=e[e.length-1].calculatedWeight,a=ie(0,t);for(let r=0;r<e.length;r++)if(a-e[r].calculatedWeight<=0)return e[r].index})(r):null},we=h.c.div.withConfig({displayName:"styledCell__StyledCell",componentId:"sc-4x2wvu-0"})(["display:flex;position:relative;background:",";flex-basis:",";padding-top:",";cursor:",";box-shadow:",";"],k.glassTransparent,e=>e.basis,e=>e.basis,e=>"brown"===e.fill?"not-allowed":"pointer",T.standardInset),ve=h.c.div.withConfig({displayName:"styledCell__StyledCellContent",componentId:"sc-4x2wvu-1"})(["justify-content:center;align-items:center;display:flex;position:absolute;width:100%;height:100%;top:0;left:0;transition:all 400ms ease;background:",";&:hover{box-shadow:",";}"],e=>e.path?"rgba(255, 192, 203, 0.3)":"transparent",T.largeInset),Ie={human:k.greenTransparent,ai:k.redTransparent},Ee=(e,t)=>t&&t.animation?[t.animation,`${t.time}ms linear forwards`]:e?[ue.selected,"2s linear infinite"]:"",ke=h.c.div.withConfig({displayName:"styledCellContent__StyledCellContentWrapper",componentId:"nfkiq9-0"})(["position:relative;z-index:",";width:100%;height:100%;animation:"," ",";"],e=>e.animation?"200":"100",e=>Ee(e.selected,e.animation)[0],e=>Ee(e.selected,e.animation)[1]),Te=h.c.div.withConfig({displayName:"styledCellContent__StyledCellContent",componentId:"nfkiq9-1"})(["position:relative;z-index:100;width:100%;height:100%;border-radius:50%;display:flex;justify-content:center;align-items:center;background:url(",") center center/cover no-repeat;box-shadow:",";transform:",";"],e=>E[e.image],e=>e.player?T.standard:"",e=>e.player?"scale(0.9)":""),Re=h.c.div.withConfig({displayName:"styledCellContent__StyledIndicator",componentId:"nfkiq9-2"})(["width:90%;height:90%;left:5%;top:5%;position:absolute;border-radius:50%;background-color:",";"],e=>e.player?Ie[e.player]:""),Se=e=>{const{cell:t,selected:a,grid:r,updateGrid:n,gameId:i}=e,{index:s,stats:o}=t,d=o&&o.player;if(t.attack){let e=r;setTimeout(()=>{e=e.setIn([s,"attack"],!1),n(e,i)},500)}return l.a.createElement(ke,{selected:a,animation:t.animation},l.a.createElement(Te,{selected:a,image:t.image,attack:t.attack,player:d}),l.a.createElement(Re,{player:d}))};Se.propTypes={cell:m.a.object.isRequired,selected:m.a.oneOfType([m.a.bool,m.a.number]),grid:m.a.object.isRequired,updateGrid:m.a.func.isRequired,gameId:m.a.number},Se.defaultProps={selected:!1,gameId:null};var je=Object(s.b)(e=>({grid:e.GridReducer.grid}),e=>({updateGrid:t=>e(r.updateGrid(t))}))(Se);const _e=e=>{const{columns:t,cell:a,selected:r,onClick:n,onMouseEnter:i}=e,s=100/t+"%";let o="";return"S"===a.fill?o="lightgreen":"X"===a.fill&&(o="brown"),l.a.createElement(we,{basis:s,fill:o,image:a.terrain},l.a.createElement(ve,{onClick:()=>{n()},selected:r,onMouseEnter:i,path:a.path},l.a.createElement(je,{cell:a,selected:r})))};_e.propTypes={cell:m.a.object,columns:m.a.number.isRequired,selected:m.a.oneOfType([m.a.bool,m.a.number]),onClick:m.a.func.isRequired,onMouseEnter:m.a.func.isRequired},_e.defaultProps={cell:{},selected:!1};var Oe=Object(s.b)(e=>({columns:e.ConfigReducer.settings.columns}),e=>({}))(_e);var Ge=h.c.div.withConfig({displayName:"styledConsole__StyledConsole",componentId:"sc-13143ig-0"})(["display:flex;flex-direction:column;flex-wrap:nowrap;width:100%;height:calc(50% - 10px);max-height:315px;padding:4px 8px;margin-top:auto;text-align:left;font-size:14px;overflow-y:scroll;box-shadow:",";border-radius:",";background-color:",";&::-webkit-scrollbar{-webkit-appearance:none;width:7px !important;}&::-webkit-scrollbar-thumb{border-radius:4px;background-color:",";box-shadow:",";}"],T.standard,R,k.glassTransparent,k.gray,T.standard);const Ne={human:"green",ai:"red"},qe=e=>{const{action:t,gameInProgress:a}=e,[r,n]=Object(i.useState)([]);return Object(i.useEffect)(()=>{if(t&&a){let e="";const a=Ne[t.selected.stats.player],i=t.skipped,l=t.selected.stats,s=t.path,o=t.defender?t.defender.stats:null,d=t.attackResult?t.attackResult.attackResult:null,c=t.attackResult?t.attackResult.damageResult:null;i?e+=`<span style='color: ${a};'>${l.name}</span> SKIPPED turn `:(s.length-1>0&&(e+=`<span style='color: ${a};'>${l.name}</span> moved ${s.length-1} tile${s.length-1>1?"s":""}${t.defender?"<br>":""}`),t.defender&&(e+=`<span style='color: ${a};'>${l.name}</span> attacked <span style='color: ${Ne[o.player]};'>${o.name}</span><br>`,e+=`${l.name} rolled ${d.attack} 1d20(${d.attackRoll}) + ${d.attackBonus} vs. AC:${d.defenderAC} and ${d.isHit?`<span style='color: purple;'>${c.isDead?"KILLED!":"HIT!"} for ${c.damage} damage.</span>`:"<span style='color: purple;'>MISSED!</span>"}`)),n([e+="<br><br>",...r])}else n([])},[t]),l.a.createElement(Ge,null,r.map((e,t)=>l.a.createElement("p",{key:t,dangerouslySetInnerHTML:{__html:e}})))};qe.propTypes={action:m.a.object,selected:m.a.oneOfType([m.a.bool,m.a.number]),gameInProgress:m.a.bool.isRequired},qe.defaultProps={selected:!1,action:{}};var Pe=qe;var $e=h.c.div.withConfig({displayName:"styledSidebarInfo__StyledSidebarInfo",componentId:"sc-18el9y4-0"})(["display:flex;width:100%;height:50%;box-shadow:",";border-radius:",";background-color:",";padding:4px 8px;"],T.standard,R,k.glass);const Be=h.c.div.withConfig({displayName:"styledCharacterInfo__StyledCharacterInfo",componentId:"sc-1i7a28w-0"})(["width:100%;display:flex;flex-direction:column;font-family:",";padding:0 10px;h2{font-size:24px;font-weight:bolder;text-shadow:2px 2px 2px ",";margin:10px auto;}"],O,e=>"ai"===e.player?k.redTransparent:k.greenTransparent),He=h.c.div.withConfig({displayName:"styledCharacterInfo__StyledCharacterInfoStat",componentId:"sc-1i7a28w-1"})(["width:auto;display:flex;align-items:center;justify-content:space-between;font-weight:bold;margin-top:5px;padding:0;font-weight:bolder;font-size:16px;span{display:flex;justify-content:center;align-items:center;border-radius:50%;width:26px;height:26px;box-shadow:",";margin-left:10px;font-size:16px;}"],e=>"ai"===e.player?T.standarInsetWithColor(k.redTransparent):T.standarInsetWithColor(k.greenTransparent)),Ae=h.c.div.withConfig({displayName:"styledCharacterInfo__StyledCharacterInfoTitle",componentId:"sc-1i7a28w-2"})([""]),Je=h.c.div.withConfig({displayName:"styledCharacterInfo__StyledCharacterInfoImage",componentId:"sc-1i7a28w-3"})(["width:70px;padding-top:70px;border-radius:50%;background:url(",") center center/cover no-repeat;margin:5px auto;box-shadow:",";"],e=>E[e.image],T.standardInset),ze=e=>{const{name:t,speed:a,image:r,hp:n,attack:i,ac:s,player:o}=e;return l.a.createElement(Be,{player:o},l.a.createElement(Ae,null,l.a.createElement(Je,{image:r}),l.a.createElement("h2",null,t)),l.a.createElement(He,{player:o},"HP:",l.a.createElement("span",null,n)),l.a.createElement(He,{player:o},"Attack:",l.a.createElement("span",null,i)),l.a.createElement(He,{player:o},"AC:",l.a.createElement("span",null,s)),l.a.createElement(He,{player:o},"Speed:",l.a.createElement("span",null,a)))};ze.propTypes={name:m.a.string.isRequired,speed:m.a.number.isRequired,image:m.a.string.isRequired,hp:m.a.number.isRequired,attack:m.a.number.isRequired,ac:m.a.number.isRequired,player:m.a.string.isRequired},ze.defaultProps={};var De=ze;const Me=e=>{const{gameInProgress:t,activeCharacter:a,hoverCharacter:r}=e;return l.a.createElement(l.a.Fragment,null,l.a.createElement($e,null,a.name&&l.a.createElement(De,{name:a.name,attack:a.attack,hp:a.hp,ac:a.ac,speed:a.speed,image:a.image,player:a.player}),r.name&&l.a.createElement(De,{name:r.name,attack:r.attack,hp:r.hp,ac:r.ac,speed:r.speed,image:r.image,player:r.player})),";")};Me.propTypes={gameInProgress:m.a.bool,activeCharacter:m.a.object.isRequired,hoverCharacter:m.a.object.isRequired},Me.defaultProps={gameInProgress:!1};var We=Me;var Le=h.c.div.withConfig({displayName:"styledSidebar__StyledSidebar",componentId:"bobnt5-0"})(["display:flex;flex-direction:column;flex-wrap:nowrap;width:33.3%;padding-left:10px;"]);const Ue=e=>{const{action:t,gameInProgress:a,activeCharacter:r,hoverCharacter:n}=e;return l.a.createElement(Le,null,l.a.createElement(We,{gameInProgress:a,activeCharacter:r,hoverCharacter:n}),l.a.createElement(Pe,{action:t,gameInProgress:a}))};Ue.propTypes={action:m.a.object,gameInProgress:m.a.bool.isRequired,activeCharacter:m.a.object.isRequired,hoverCharacter:m.a.object.isRequired},Ue.defaultProps={action:null};var Xe=Ue;const Fe=h.c.div.withConfig({displayName:"styledGridHeader__StyledGridHeader",componentId:"rq1y7p-0"})(["display:flex;width:100%;align-items:center;margin-bottom:10px;"]),Ve=e=>"first"===e?[ue.first,"800ms ease-in forwards"]:"last"===e?[ue.last,"300ms ease-in forwards"]:"",Ye=h.c.div.withConfig({displayName:"styledTurnBar__StyledTitle",componentId:"sc-9at580-0"})(["padding:0 5px 0 10px;line-height:1.3;font-weight:bold;font-size:14px;width:60px;min-width:60px;font-family:",";"],G),Ke=h.c.div.withConfig({displayName:"styledTurnBar__StyledTurnBar",componentId:"sc-9at580-1"})(["display:flex;border:1px solid darkgray;width:66.6%;align-items:center;height:60px;overflow-x:auto;overflow-y:hidden;box-shadow:",";border-radius:",";background-color:",";&::-webkit-scrollbar{-webkit-appearance:none;width:7px !important;}&::-webkit-scrollbar-thumb{border-radius:4px;background-color:",";box-shadow:",";}"],T.standard,R,k.glassTransparent,k.gray,T.standard),Qe=Object(h.c)(Te).withConfig({displayName:"styledTurnBar__StyledTBCellContent",componentId:"sc-9at580-2"})([""]),Ze=Object(h.c)(Re).withConfig({displayName:"styledTurnBar__StyledTBIndicator",componentId:"sc-9at580-3"})([""]),et=Object(h.c)(ke).withConfig({displayName:"styledTurnBar__StyledTBContentWrapper",componentId:"sc-9at580-4"})(["width:50px;min-width:50px;height:50px;animation:'';animation:"," ",";"],e=>Ve(e.moved)[0],e=>Ve(e.moved)[1]),tt=e=>{const{allCharacters:t,selected:a,gameInProgress:r}=e,[n,s]=Object(i.useState)(null);Object(i.useEffect)(()=>{t.length>0?n?async function(){let e=JSON.parse(JSON.stringify(n));e[0].moved="first",s(e),await le(1e3),(e=JSON.parse(JSON.stringify(t)))[e.length-1].moved="last",s(e),await le(500),s(t)}():s(t):s(null)},[t]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ke,null,l.a.createElement(Ye,null,"Turn",l.a.createElement("br",null),"Order:"),r&&(e=>{if(e)return e.map((e,t)=>{const r=e.index===a;return l.a.createElement(et,{selected:r,animation:e.animation,key:t,moved:e.moved},l.a.createElement(Qe,{selected:r,image:e.image,player:e.player}),l.a.createElement(Ze,{player:e.player}))})})(n)))};tt.propTypes={selected:m.a.oneOfType([m.a.bool,m.a.number]),allCharacters:m.a.array,gameInProgress:m.a.bool.isRequired},tt.defaultProps={allCharacters:[],selected:!1};var at=Object(s.b)(e=>({allCharacters:e.TurnReducer.turnInfo.get("allCharacters")}),e=>({}))(tt);const rt=h.c.div.withConfig({displayName:"styledControlBar__StyledControlBarWrapper",componentId:"kjj35j-0"})(["width:33.3%;padding-left:10px;"]),nt=h.c.div.withConfig({displayName:"styledControlBar__StyledControlBar",componentId:"kjj35j-1"})(["display:flex;align-items:center;justify-content:space-around;height:60px;box-shadow:",";border-radius:",";background-color:",";"],T.standard,R,k.glass),it=h.c.div.withConfig({displayName:"styledSpinner__StyledSpinner",componentId:"sc-4rgba1-0"})(["transform:scale(0.4);position:absolute;.lds-roller{display:inline-block;position:relative;width:80px;height:80px;}.lds-roller div{animation:lds-roller 1.2s cubic-bezier(0.5,0,0.5,1) infinite;transform-origin:40px 40px;}.lds-roller div:after{content:' ';display:block;position:absolute;width:9px;height:9px;border-radius:50%;background:",";box-shadow:",";margin:-4px 0 0 -4px;}.lds-roller div:nth-child(1){animation-delay:-0.036s;}.lds-roller div:nth-child(1):after{top:63px;left:63px;}.lds-roller div:nth-child(2){animation-delay:-0.072s;}.lds-roller div:nth-child(2):after{top:68px;left:56px;}.lds-roller div:nth-child(3){animation-delay:-0.108s;}.lds-roller div:nth-child(3):after{top:71px;left:48px;}.lds-roller div:nth-child(4){animation-delay:-0.144s;}.lds-roller div:nth-child(4):after{top:72px;left:40px;}.lds-roller div:nth-child(5){animation-delay:-0.18s;}.lds-roller div:nth-child(5):after{top:71px;left:32px;}.lds-roller div:nth-child(6){animation-delay:-0.216s;}.lds-roller div:nth-child(6):after{top:68px;left:24px;}.lds-roller div:nth-child(7){animation-delay:-0.252s;}.lds-roller div:nth-child(7):after{top:63px;left:17px;}.lds-roller div:nth-child(8){animation-delay:-0.288s;}.lds-roller div:nth-child(8):after{top:56px;left:12px;}@keyframes lds-roller{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}"],k.white,T.standard),lt=e=>l.a.createElement(it,null,l.a.createElement("div",{className:"lds-roller"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)));lt.propTypes={},lt.defaultProps={};var st=lt;const ot=e=>{const{endGame:t,startGame:a,skipTurn:r,gameInProgress:n,isAiTurn:s}=e,[o,d]=Object(i.useState)(!1);return l.a.createElement(rt,null,l.a.createElement(nt,null,n&&l.a.createElement(M,{type:"secondary",func:()=>{t(),s&&(d(!0),setTimeout(()=>{d(!1)},3500))},text:"Surrender"}),!n&&l.a.createElement(M,{disabled:o,type:"secondary",func:a,text:"Start"}),(o||s&&n)&&l.a.createElement(st,null),l.a.createElement(M,{type:"secondary",disabled:!n||s,func:r,text:"Skip Turn"})))};ot.propTypes={endGame:m.a.func.isRequired,startGame:m.a.func.isRequired,skipTurn:m.a.func.isRequired,gameInProgress:m.a.bool.isRequired,isAiTurn:m.a.bool},ot.defaultProps={isAiTurn:!1};var dt=ot;const ct=e=>{const{grid:t,selected:a,startGame:r,endGame:n,skipTurn:s,gameInProgress:o}=e,[d,c]=Object(i.useState)(!1);return Object(i.useEffect)(()=>{const e=t.getIn([a]);c(!a||!e||"ai"===t.getIn([a]).stats.player)},[a]),l.a.createElement(Fe,null,l.a.createElement(at,{grid:t,selected:a,gameInProgress:o}),l.a.createElement(dt,{isAiTurn:d,startGame:r,endGame:n,skipTurn:s,gameInProgress:o}))};ct.propTypes={grid:m.a.object.isRequired,selected:m.a.oneOfType([m.a.bool,m.a.number]),endGame:m.a.func.isRequired,startGame:m.a.func.isRequired,skipTurn:m.a.func.isRequired,gameInProgress:m.a.bool.isRequired},ct.defaultProps={selected:!1};var pt=ct;const ut=e=>{const{grid:t,updateGrid:a,settings:r,createGrid:n,destroyGrid:s,activeCharacter:o,allCharacters:d,startTurn:c,nextMove:p,resetTurn:u,humanCharacters:m,aiCharacters:h}=e,[g,f]=Object(i.useState)(),[y,b]=Object(i.useState)(!1),[x,C]=Object(i.useState)({}),[w,v]=Object(i.useState)(!1),[I,E]=Object(i.useState)(),[k,T]=Object(i.useState)({}),[R,S]=Object(i.useState)(null),j=Object(i.useRef)(!1);Object(i.useEffect)(()=>{d.length>0&&(h.length<1&&(alert("You win!"),G()),m.length<1&&(alert("You lose!"),G()))},[d]),Object(i.useEffect)(()=>{o&&o.name&&q(t.get(o.index))},[o]),Object(i.useEffect)(()=>{0===d.length&&t.size>0&&c(t,R)},[t]),Object(i.useEffect)(()=>{if("ai"===o.player&&x&&g){const e=Ce(t,o,m);if(e||0===e){const a=$(t.get(e));a.path.length>0&&setTimeout(()=>{P(a.path,a.attackResult,a.defenderIndex)},1300)}else setTimeout(()=>{E({selected:t.getIn([g]),skipped:!0}),O(t,R)},500)}},[x]);const _=(e,t)=>{j.current&&a(e,t)},O=(e,t)=>{j.current&&p(e,t)},G=()=>{j.current=!1,E(),s(),u()},N=()=>{b(!1),f(null),C({}),_(ce.clearPath(t,R))},q=e=>{b(!0),f(e.index),C(e.stats),_(ce.clearPath(t,R))};async function P(e,a,r){const n=a&&a.attackResult.isHit;v(!0),_(t.setIn([g,"animation"],ue.moveAnimationBuilder(e,300,{attackResult:a,defender:t.getIn([r])})),R);const i=a?900:0;await le(300*e.length+i),N();let l=t;l=ce.moveCharacter(l,x,l.get(e[e.length-1].index));let s=a?l.getIn([r]):null;s&&(l=l.setIn([s.index,"attack"],!0)),n&&(s.stats.hp=a.damageResult.hp,l=s.stats.hp>0?ce.updateCharacter(l,s):ce.clearTile(l,r)),E({selected:t.getIn([g]),path:e,attackResult:a,defender:s}),_(l,R),await le(a?500:0),v(!1),O(l,R)}const $=e=>{const a=ce.startSearch(t,g,e.index,x);let r=!1,n=[],i=!1;return a&&a.grid&&(_(a.grid,R),n=a.result,i=a.attackResult,r=!0),{moveAllowed:r,path:n,attackResult:i,defenderIndex:e.index}};return l.a.createElement(K,null,l.a.createElement(pt,{grid:t,selected:g,startGame:()=>{const e=Date.now();S(e),j.current=!0,n(r,e),u(e)},endGame:G,skipTurn:()=>{"ai"!==o.player&&(E({selected:t.getIn([g]),skipped:!0}),O(t,R))},gameInProgress:j.current}),l.a.createElement(Y,{empty:0===d.length},d.length>0?t.map(e=>{const t=e.index===g;return l.a.createElement(Oe,{key:e.index,cell:e,selected:t,onClick:()=>{(e=>{if(console.log("cell",e),!y||w||"ai"===o.player){if("C"!==e.fill);}else{const t=$(e);"X"!==e.fill&&t.path.length>0&&t.moveAllowed&&P(t.path,t.attackResult,t.defenderIndex)}})(e)},onMouseEnter:()=>{e&&e.stats&&e.stats.name&&e.stats.player?T(e.stats):T({}),y&&!w&&"ai"!==o.player&&$(e)}})}):null),l.a.createElement(Xe,{action:I,gameInProgress:j.current,activeCharacter:o,hoverCharacter:k}))};ut.propTypes={updateGrid:m.a.func.isRequired,grid:m.a.object.isRequired,settings:m.a.object.isRequired,createGrid:m.a.func.isRequired,destroyGrid:m.a.func.isRequired,activeCharacter:m.a.object,allCharacters:m.a.array.isRequired,startTurn:m.a.func.isRequired,nextMove:m.a.func.isRequired,resetTurn:m.a.func.isRequired,humanCharacters:m.a.array,aiCharacters:m.a.array},ut.defaultProps={activeCharacter:null,humanCharacters:[],aiCharacters:[]};var mt=Object(s.b)(e=>({grid:e.GridReducer.grid,settings:e.ConfigReducer.settings,turnInfo:e.TurnReducer.turnInfo,activeCharacter:e.TurnReducer.turnInfo.get("activeCharacter"),allCharacters:e.TurnReducer.turnInfo.get("allCharacters"),humanCharacters:e.TurnReducer.turnInfo.get("humanCharacters"),aiCharacters:e.TurnReducer.turnInfo.get("aiCharacters")}),e=>({updateGrid:(t,a)=>e(r.updateGrid(t,a)),createGrid:(t,a)=>e(r.createGrid(t,a)),destroyGrid:()=>e(r.destroyGrid()),startTurn:(t,a)=>e(n.startTurn(t,a)),nextMove:(t,a)=>e(n.nextMove(t,a)),resetTurn:()=>e(n.resetTurn())}))(ut);const ht=e=>{const{destroyGrid:t,resetTurn:a}=e;return Object(i.useEffect)(()=>(t(),a(),function(){t(),a()})),l.a.createElement(H,null,l.a.createElement(mt,null))};ht.propTypes={destroyGrid:m.a.func.isRequired,resetTurn:m.a.func.isRequired},ht.defaultProps={};var gt=Object(s.b)(e=>({}),e=>({destroyGrid:()=>e(r.destroyGrid()),resetTurn:()=>e(n.resetTurn())}))(ht);const ft=h.b`
    body {
        text-align: center;
        color: ${k.black};
        font-family: ${O};
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    ul {
        list-style: none;
    }

    html, body, div, span, applet, object, iframe,
    h1, h2, h3, h4, h5, h6, p, blockquote, pre,
    a, abbr, acronym, address, big, cite, code,
    del, dfn, em, img, ins, kbd, q, s, samp,
    small, strike, strong, sub, sup, tt, var,
    b, u, i, center,
    dl, dt, dd, ol, ul, li,
    fieldset, form, label, legend,
    table, caption, tbody, tfoot, thead, tr, th, td,
    article, aside, canvas, details, embed, 
    figure, figcaption, footer, header, hgroup, 
    menu, nav, output, ruby, section, summary,
    time, mark, audio, video {
        margin: 0;
        padding: 0;
        border: 0;
        font-size: 100%;
        font: inherit;
        vertical-align: baseline;
    }

    /* HTML5 display-role reset for older browsers */
    article, aside, details, figcaption, figure, 
    footer, header, hgroup, menu, nav, section {
        display: block;
    }

    body {
        line-height: 1;
    }

    ol, ul {
        list-style: none;
    }

    blockquote, q {
        quotes: none;
    }

    blockquote:before, blockquote:after,
    q:before, q:after {
        content: '';
        content: none;
    }

    table {
        border-collapse: collapse;
        border-spacing: 0;
    }

    a,
    a:visited,
    a:focus,
    a:hover {
        text-decoration: none;
        color: inherit;
    }
`;var yt=function(){return l.a.createElement(c.a,{basename:""},l.a.createElement(c.a,null,l.a.createElement(h.a,{theme:N},l.a.createElement(ft,null),l.a.createElement(U,null,l.a.createElement(p.c,null,l.a.createElement(p.a,{path:A.about,component:V}),l.a.createElement(p.a,{path:A.battle,component:gt}),l.a.createElement(p.a,{exact:!0,path:A.home,component:F}),l.a.createElement(p.a,null,l.a.createElement("h1",null,"Page not found")))))))},bt=a(12),xt=a(34),Ct=a.n(xt);const wt={gameId:null,grid:new ne.a([])};var vt=(e=wt,t)=>{switch(t.type){case"UPDATE_GRID":return 0===e.grid.size?{...e}:e.gameId!==t.gameId?{...e}:{...e,grid:t.grid};case"CREATE_GRID":return{...e,grid:ce.makeGrid(t.settings),gameId:t.gameId};case"DESTROY_GRID":return{...e,grid:new ne.a([])};default:return e}};const It={muted:!0,settings:{rows:10,columns:10,fill:{rows:10,obstacles(){return Math.round(this.rows*(this.rows/2.5)-1.5*this.rows)},characters:[{id:1,name:"Victor",type:"hero",speed:6,image:"warrior",index:4,fill:"C",sound:"warrior",maxHp:4,hp:4,attack:2,ac:0,damage:[2,6],player:"human",initiative:24},{id:2,name:"Victor S",type:"hero",speed:6,image:"warrior",index:5,fill:"C",sound:"warrior",maxHp:4,hp:4,attack:2,ac:15,damage:[2,6],player:"human",initiative:10},{id:3,name:"Goblin",type:"enemy",speed:5,image:"goblin",index:96,fill:"C",sound:"goblin",maxHp:6,hp:6,attack:0,ac:8,damage:[1,4],player:"ai",initiative:18},{id:4,name:"Goblin F",type:"enemy",speed:6,image:"goblin",index:93,fill:"C",sound:"goblin",maxHp:6,hp:6,attack:0,ac:8,damage:[1,4],player:"ai",initiative:13},{id:5,name:"Goblin",type:"enemy",speed:7,image:"goblin",index:94,fill:"C",sound:"goblin",maxHp:6,hp:6,attack:0,ac:8,damage:[1,4],player:"ai",initiative:18},{id:6,name:"Goblin",type:"enemy",speed:5,image:"goblin",index:95,fill:"C",sound:"goblin",maxHp:6,hp:6,attack:0,ac:8,damage:[1,4],player:"ai",initiative:18}]}}};var Et=(e=It,t)=>{switch(t.type){case"TOGGLE_SOUND":return{...e,muted:t.muted};default:return e}};const kt={gameId:null,turnInfo:new ne.b({currentPlayer:null,activeCharacter:{},turnOrder:[],allCharacters:[],humanCharacters:[],aiCharacters:[]})};var Tt=(e=kt,t)=>{switch(t.type){case"START_TURN":{let{allCharacters:a,humanCharacters:r,aiCharacters:n}=he.findCharacters(t.grid);a=he.sortCharacters(a);let i=e.turnInfo;return i=i.setIn(["allCharacters"],a).setIn(["humanCharacters"],r).setIn(["aiCharacters"],n).setIn(["activeCharacter"],a[0]),{...e,turnInfo:i,gameId:t.gameId}}case"NEXT_MOVE":{if(0===e.turnInfo.get("allCharacters").length)return{...e};if(e.gameId!==t.gameId)return{...e};let{allCharacters:a,humanCharacters:r,aiCharacters:n,activeCharacter:i}=he.updateCharacters(e,t.grid),l=e.turnInfo;return l=l.setIn(["allCharacters"],a).setIn(["humanCharacters"],r).setIn(["aiCharacters"],n).setIn(["activeCharacter"],i),{...e,turnInfo:l}}case"RESET_TURN":{const a=new ne.b({currentPlayer:null,activeCharacter:{},turnOrder:[],allCharacters:[],humanCharacters:[],aiCharacters:[]});return{...e,turnInfo:a,gameId:t.gameId}}default:return e}},Rt=Object(bt.c)({GridReducer:vt,ConfigReducer:Et,TurnReducer:Tt});const St=Object(bt.d)(Rt,Object(bt.a)(Ct.a));d.a.render(l.a.createElement(s.a,{store:St},l.a.createElement(yt,null)),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.0b1f5d93.chunk.js.map