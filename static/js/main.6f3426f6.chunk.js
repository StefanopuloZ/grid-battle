(this["webpackJsonpgrid-battle"]=this["webpackJsonpgrid-battle"]||[]).push([[0],{27:function(e,t,a){e.exports=a.p+"static/media/ground.a122af34.jpg"},28:function(e,t,a){e.exports=a.p+"static/media/warrior.d8b023eb.png"},29:function(e,t,a){e.exports=a.p+"static/media/tree.f7e58740.png"},30:function(e,t,a){e.exports=a.p+"static/media/goblin_regular.c800bdd9.png"},31:function(e,t,a){e.exports=a.p+"static/media/golem.a0b06764.png"},32:function(e,t,a){e.exports=a.p+"static/media/fortuna.2fdac4a2.png"},40:function(e,t,a){e.exports=a(54)},50:function(e,t,a){},53:function(e){e.exports=JSON.parse('{"IcoMoonType":"selection","icons":[{"icon":{"paths":["M928 0h-832c-52.8 0-96 43.2-96 96v832c0 52.8 43.2 96 96 96h832c52.8 0 96-43.2 96-96v-832c0-52.8-43.2-96-96-96zM384 832h-128v-448h128v448zM320 320c-35.4 0-64-28.6-64-64s28.6-64 64-64c35.4 0 64 28.6 64 64s-28.6 64-64 64zM832 832h-128v-256c0-35.4-28.6-64-64-64s-64 28.6-64 64v256h-128v-448h128v79.4c26.4-36.2 66.8-79.4 112-79.4 79.6 0 144 71.6 144 160v288z"],"attrs":[{}],"isMulticolor":false,"isMulticolor2":false,"tags":["linkedin","brand","social"],"grid":16},"attrs":[{}],"properties":{"order":5,"id":1,"name":"linkedin","prevSize":32,"code":59648},"setIdx":0,"setId":0,"iconIdx":0},{"icon":{"paths":["M512.008 12.642c-282.738 0-512.008 229.218-512.008 511.998 0 226.214 146.704 418.132 350.136 485.836 25.586 4.738 34.992-11.11 34.992-24.632 0-12.204-0.48-52.542-0.696-95.324-142.448 30.976-172.504-60.41-172.504-60.41-23.282-59.176-56.848-74.916-56.848-74.916-46.452-31.778 3.51-31.124 3.51-31.124 51.4 3.61 78.476 52.766 78.476 52.766 45.672 78.27 119.776 55.64 149.004 42.558 4.588-33.086 17.852-55.68 32.506-68.464-113.73-12.942-233.276-56.85-233.276-253.032 0-55.898 20.004-101.574 52.76-137.428-5.316-12.9-22.854-64.972 4.952-135.5 0 0 43.006-13.752 140.84 52.49 40.836-11.348 84.636-17.036 128.154-17.234 43.502 0.198 87.336 5.886 128.256 17.234 97.734-66.244 140.656-52.49 140.656-52.49 27.872 70.528 10.35 122.6 5.036 135.5 32.82 35.856 52.694 81.532 52.694 137.428 0 196.654-119.778 239.95-233.79 252.624 18.364 15.89 34.724 47.046 34.724 94.812 0 68.508-0.596 123.644-0.596 140.508 0 13.628 9.222 29.594 35.172 24.566 203.322-67.776 349.842-259.626 349.842-485.768 0-282.78-229.234-511.998-511.992-511.998z"],"attrs":[{}],"isMulticolor":false,"isMulticolor2":false,"tags":["github","brand","octacat","social"],"grid":16},"attrs":[{}],"properties":{"order":4,"id":0,"name":"github","prevSize":32,"code":59649},"setIdx":0,"setId":0,"iconIdx":1}],"height":1024,"metadata":{"name":"icomoon"},"preferences":{"showGlyphs":true,"showCodes":true,"showQuickUse":true,"showQuickUse2":true,"showSVGs":true,"fontPref":{"prefix":"icon-","metadata":{"fontFamily":"icomoon"},"metrics":{"emSize":1024,"baseline":6.25,"whitespace":50},"embed":false},"imagePref":{"prefix":"icon-","png":true,"useClassSelector":true,"color":0,"bgColor":16777215,"name":"icomoon","classSelector":".icon"},"historySize":50}}')},54:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"updateGrid",(function(){return me})),a.d(r,"createGrid",(function(){return ue})),a.d(r,"destroyGrid",(function(){return he}));var n={};a.r(n),a.d(n,"startTurn",(function(){return ge})),a.d(n,"nextMove",(function(){return fe})),a.d(n,"resetTurn",(function(){return be}));var i=a(0),l=a.n(i),o=a(4),s=a(16),d=a.n(s),c=(a(50),a(12)),p=a(11),m=a(1),u=a.n(m),h=a(2),g=a(27),f=a.n(g),b=a(28),y=a.n(b),x=a(29),w=a.n(x),v=a(30),C=a.n(v),I=a(31),E=a.n(I),k=a(32),T=a.n(k);const R=f.a,S={warrior:y.a,tree:w.a,goblin:C.a,golem:E.a,fortuna:T.a},_={black:"#252525",white:"#fff",whiteTransparent:"rgba(255, 255, 255, 0.8)",blue:"#007ce0",navy:"#004175",gray:"#5c5c5c50",greenTransparent:"#5ea56a",glassTransparent:"rgba(190,255,247, 0.6)",glass:"rgba(190,255,247, 0.8)",redMain:"#df4646",redTransparent:"rgba(255, 0, 0, 0.418)"},j={standard:"2px 1px 5px 2px rgba(0, 0, 0, 0.4)",large:"5px 0px 10px 5px rgba(0, 0, 0, 0.8)",standardInset:"inset 1px 1px 5px -2px rgba(0, 0, 0, 0.8)",largeInset:"inset 1px 1px 20px -4px rgba(0, 0, 0, 0.8)",standarInsetWithColor:e=>`inset 1px 1px 20px -4px ${e}`},O="6px",q="20px",G=["425px","900px"];G.sm=G[0];const P={small:`(min-width: ${G[0]})`,medium:`(min-width: ${G[1]})`},N="Lora",H="Lora-Bold";var $={colors:_,breakpoints:G,boxShadow:j};const M=h.c.div.withConfig({displayName:"PageWrapperStyle__Wrapper",componentId:"sc-1ro2fmk-0"})(["min-height:100vh;display:flex;flex-direction:column;background:url(",") center center/cover no-repeat;overflow:hidden;font-family:",";"],R,N),z=h.c.div.withConfig({displayName:"PageWrapperStyle__FooterWrapper",componentId:"sc-1ro2fmk-1"})(["margin-top:auto;background-color:",";box-shadow:",";border-radius:",";height:50px;padding:5px 20px;display:flex;position:relative;top:27px;font-size:14px;justify-content:center;"],_.whiteTransparent,j.standard,q),B=h.c.span.withConfig({displayName:"PageWrapperStyle__IconWrapper",componentId:"sc-1ro2fmk-2"})(["display:block;width:15px;margin-left:10px;"]),A=h.c.div.withConfig({displayName:"styledHeader__HeaderWrapper",componentId:"sc-1100p2l-0"})(["box-shadow:",";border-radius:",";position:relative;top:-20px;padding:30px 10px 10px 10px;background-color:",";max-height:142px;padding-bottom:0;@media ","{max-height:96px;padding-bottom:10px;}"],j.large,q,_.whiteTransparent,P.small),D=h.c.ul.withConfig({displayName:"styledHeader__HeaderList",componentId:"sc-1100p2l-1"})(["display:flex;justify-content:space-around;flex-wrap:wrap;@media ","{flex-wrap:nowrap;}"],P.small),W=h.c.div.withConfig({displayName:"StyledContainer",componentId:"sc-29a629-0"})(["max-width:1000px;margin:auto;padding:10px;width:100%;"]),F="/grid-battle";var J={home:`${F}/`,battle:`${F}/battle`,about:`${F}/about`};const L=h.c.div.withConfig({displayName:"styledButton__StyledButton",componentId:"intozn-0"})(["padding:5px 10px;background-color:",";min-width:100px;border-radius:",";box-shadow:",",0 0 0 rgba(255,255,255,0);transition:all 300ms ease-in-out;cursor:",";background-color:",";"," @media ","{margin-bottom:0;}"],_.white,O,j.standardInset,e=>e.disabled?"default":"pointer",e=>e.disabled?_.gray:"",e=>e.disabled?"":`  &:hover {\n    box-shadow: inset 0 0 0 rgba(255, 255, 255, 0), ${j.standard};\n  }`,P.small),U={primary:Object(h.c)(L).withConfig({displayName:"styledButton__StyledButtonPrimary",componentId:"intozn-1"})(["padding:10px 40px;margin-bottom:10px;"]),secondary:Object(h.c)(L).withConfig({displayName:"styledButton__StyledButtonSecondary",componentId:"intozn-2"})(["padding:7px 14px;"])},X=e=>{const{text:t,func:a,disabled:r,type:n}=e,i=U[n]||L;return l.a.createElement(i,{onClick:a,disabled:r},t)};X.propTypes={text:u.a.string,func:u.a.func,disabled:u.a.bool,type:u.a.string},X.defaultProps={text:"",func:()=>{},disabled:!1,type:""};var V=X;const Y=e=>{const{allCharacters:t}=e,[a,r]=Object(i.useState)(!1),[n,o]=Object(i.useState)(""),s=Object(p.f)().pathname,d=t.length>0,m=()=>{r(!a)};return l.a.createElement(A,null,l.a.createElement(W,null,l.a.createElement("nav",null,l.a.createElement(D,null,a?l.a.createElement(l.a.Fragment,null,l.a.createElement(c.b,{to:n,onClick:()=>{m()}},l.a.createElement(V,{type:"primary",text:"Confirm"})),l.a.createElement("div",null,"This will end current game. Proceed?"),l.a.createElement(V,{type:"primary",text:"Cancel",func:()=>{m()}})):l.a.createElement(l.a.Fragment,null,l.a.createElement(c.b,{to:J.home,onClick:e=>{d&&(e.preventDefault(),o(J.home),m())}},l.a.createElement(V,{type:"primary",disabled:s===J.home,text:"Home"})),l.a.createElement(c.b,{to:J.battle},l.a.createElement(V,{type:"primary",disabled:s===J.battle,text:"Battle"})),l.a.createElement(c.b,{to:J.about,onClick:e=>{d&&(e.preventDefault(),o(J.about),m())}},l.a.createElement(V,{type:"primary",disabled:s===J.about,text:"About"})))))))};Y.propTypes={allCharacters:u.a.array},Y.defaultProps={allCharacters:[]};var K=Object(o.b)(e=>({allCharacters:e.TurnReducer.turnInfo.get("allCharacters")}),e=>({}))(Y),Q=a(36),Z=a.n(Q);const ee=h.c.div.withConfig({displayName:"styledIcoMoon__StyledIcoMoon",componentId:"sc-174vd75-0"})(["width:100%;cursor:pointer;transition:all ease .3s;&:hover{opacity:0.7;}"]);function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}const ae=a(53);var re=({...e})=>l.a.createElement(ee,null,l.a.createElement(Z.a,te({iconSet:ae},e)));const ne=e=>{const[t,a]=Object(i.useState)(!1);return l.a.createElement(M,{onClick:()=>{!t&&a(!0)}},l.a.createElement(K,null),e.children,l.a.createElement(z,null,"Created by - Stefan Deak",l.a.createElement("a",{href:"https://www.linkedin.com/in/stefan-deak-ab7b99182/",target:"_blank",rel:"noopener noreferrer"},l.a.createElement(B,null,l.a.createElement(re,{icon:"linkedin"}))),l.a.createElement("a",{href:"https://github.com/StefanopuloZ",target:"_blank",rel:"noopener noreferrer"},l.a.createElement(B,null,l.a.createElement(re,{icon:"github"})))))};ne.propTypes={children:u.a.object},ne.defaultProps={childrenchildren:{}};var ie=Object(o.b)(e=>({}),e=>({}))(ne);const le=h.c.div.withConfig({displayName:"StyledHome",componentId:"l871od-0"})(["min-height:calc(100vh - 200px);background-color:",";border-radius:",";box-shadow:",";display:flex;flex-direction:column;padding:10px 20px;padding-bottom:40px;margin-bottom:-12px;h1{margin-top:80px;font-size:42px;text-align:center;width:100%;font-family:",";margin-bottom:40px;}h2{margin-top:20px;font-size:36px;text-align:center;width:100%;font-family:",";margin-bottom:40px;}h3{margin-top:30px;font-size:24px;text-align:center;width:100%;font-family:",";margin-bottom:10px;}p{margin-top:20px;font-size:22px;font-family:",";}ul{margin-top:20px;font-size:16px;line-height:1.4;list-style:circle;margin-left:40px;}a{color:",";border-radius:",";cursor:pointer;box-shadow:",",0 0 0 rgba(255,255,255,0);display:inline-block;padding:0 4px;transition:all 0.3s ease;&:hover{box-shadow:inset 0 0 0 rgba(255,255,255,0),",";color:",";}&:visited,&:focus{color:",";}}"],_.whiteTransparent,q,j.standard,H,H,H,H,_.blue,O,j.standardInset,j.standard,_.blue,_.blue);var oe=e=>l.a.createElement(W,null,l.a.createElement(le,null,l.a.createElement("h1",null,"React.js Grid Battle"),l.a.createElement("p",null,"Welcome!"),l.a.createElement("p",null,"Battle against AI in a procedurally generated maps.")));const se=Object(h.c)(le).withConfig({displayName:"styledAbout__StyledAbout",componentId:"sc-1vhmk3g-0"})(["text-align:left;font-size:16px;p{margin-top:10px;line-height:1.4;font-size:16px;font-family:",";text-align:left;}"],N);var de=e=>l.a.createElement(W,null,l.a.createElement(se,null,l.a.createElement("h3",null,"About:"),l.a.createElement("p",null,"Hello, there! Grid Battle is a snapshot of fantasy setting turn-based battle in a square grid. It is not meant to be a full game (not yet at least), but more of a showcase what can be done in React with a lot of work and a little bit of imagination. This project was done in free time aside from my regular job as a Fronted developer. Currently, most of the features I have set out to do in the begining are complete so I decided to put it here for everyone to see and, hopefully, have a bit of fun. Code base is free to be inspected and used in my"," ",l.a.createElement("a",{href:"https://github.com/StefanopuloZ/grid-battle",target:"_blank",rel:"noopener noreferrer"},"github repo")," ","where you can find adittional technical info as well. Here, I will state that I have used",l.a.createElement("a",{href:"https://reactjs.org/",target:"_blank",rel:"noopener noreferrer"}," ","React.js 16.10.2")," ","with"," ",l.a.createElement("a",{href:"https://styled-components.com/",target:"_blank",rel:"noopener noreferrer"},"Styled Components"),"library for css. No other graphical library has been used."),l.a.createElement("h3",null,"Rules:"),l.a.createElement("p",null,"Rules are just loosely based on Dungeons and Dragons d20 system. d20 means that each attack generates a number in 1-20 range which is equivalent to the tweanty sided die roll. I have chosen this system as my times being DM (Dungeon Master) are something that brings good memories of long daily sessions with a lot of fun. So how does it work?"),l.a.createElement("ul",null,l.a.createElement("li",null,"HP: Characters hit points. Once this goes to 0 or less character is dead."),l.a.createElement("li",null,"AC: Armor Class. Number that represents characters defense. If attack roll with bonuses equals to or is greater then this number there is a HIT and damage will be rolled."),l.a.createElement("li",null,"Damage: Once character is hit, attacking characters rolls damage in said damage range. (1-6) for example and deducts that from hp."),l.a.createElement("li",null,"Attack: Bonus that is added to 1d20 roll and compared against targets AC to calculate if a HIT is being made."),l.a.createElement("li",null,"Speed: How far character can move"),l.a.createElement("li",null,"Initiative: Characters with greater initiative will act before")),l.a.createElement("h3",null,"Features:"),l.a.createElement("ul",null,l.a.createElement("li",null,"Working AI with assigned weight system for each move"),l.a.createElement("li",null,"Random map generation and character placement"),l.a.createElement("li",null,"Custom attack and movement animations"),l.a.createElement("li",null,"Complete basic battle system with rules"))));const ce=h.c.div.withConfig({displayName:"styledGrid__StyledGrid",componentId:"sc-1idlluh-0"})(["display:flex;flex-wrap:wrap;width:100%;max-width:600px;margin:auto;box-shadow:",";border-radius:",";background-color:",";padding-top:",";overflow:hidden;@media ","{max-width:100%;width:66.66%;}"],j.standard,O,e=>e.empty?_.glassTransparent:"transparent",e=>e.empty?"66.66%":"0",P.medium),pe=h.c.div.withConfig({displayName:"styledGrid__StyledGridWrapper",componentId:"sc-1idlluh-1"})(["display:flex;flex-direction:column;flex-wrap:wrap;@media ","{flex-direction:row;}"],P.medium),me=(e,t)=>({type:"UPDATE_GRID",grid:e,gameId:t}),ue=(e,t)=>({type:"CREATE_GRID",settings:e,gameId:t}),he=()=>({type:"DESTROY_GRID"}),ge=(e,t)=>({type:"START_TURN",grid:e,gameId:t}),fe=(e,t)=>({type:"NEXT_MOVE",grid:e,gameId:t}),be=e=>({type:"RESET_TURN",gameId:e});var ye=a(10);const xe=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),we=e=>JSON.parse(JSON.stringify(e)),ve=e=>new Promise(t=>{setTimeout(()=>{t()},e)}),Ce=(e,t,a)=>{let r=we(e);return((e,t,a)=>{const r=[3,4,5,6,7,93,94,95,96,97,84,85,86,13,12,22,32,31,41,51,50,60,61,62,72,82,83,17,18,28,29,39,49,48,58,57,67,66,76,75,85];let n=[];for(let i=0;i<t.obstacles();++i){let e=xe(0,a*a-1);r.includes(e)?--i:n.push(e)}return n})(0,t,a).forEach(e=>{r[e].fill="X",r[e].image="tree",r[e].terrain="grass"}),t.characters().forEach(e=>{r[e.index].fill=e.fill,r[e.index].image=e.image,r[e.index].stats=e}),r},Ie=(e,t)=>{const a=((e,t)=>{const a=xe(1,20),r=e.attack+a;return{isHit:r>=t.ac,attack:r,attackRoll:a,attackBonus:e.attack,defenderAC:t.ac}})(e,t);return{attackResult:a,damageResult:!!a.isHit&&((e,t)=>{const a=xe(e.damage[0],e.damage[1]),r=t.hp-a;return{isDead:r<=0,damage:a,hp:r}})(e,t)}},Ee=e=>e.map(e=>(e.path=0,e.direction=null,e)),ke={makeGrid:({rows:e,columns:t,fill:a})=>{let r=[];for(let n=0;n<e;++n)for(let e=0;e<t;++e)r.push({index:n*t+e,fill:"",adjecent:[],visited:0,path:0,image:"",terrain:"grass",animation:null,direction:null,sound:"click"});return r=((e,t,a)=>{let r=we(e);return r.forEach((e,t)=>{let n=[],i=t-a;i>-1&&n.push({index:i,direction:"up"});let l=t+a;l<r.length&&n.push({index:l,direction:"down"});let o=t-1;o>=0&&t%a!==0&&n.push({index:o,direction:"left"});let s=t+1;s<r.length&&s%a!==0&&n.push({index:s,direction:"right"}),e.adjecent=n}),r})(r,0,t),r=Ce(r,a,e),Object(ye.a)(r)},startSearch:(e,t,a,r)=>{let n=e,i=n.toJS();const l=i[t].stats,o=i[a].stats&&i[a].stats.player!==l.player;if(n.get(a).fill&&!o||!t&&0!==t)return null;let s,d=((e,t,a)=>{let r,n=e.toJS(),i=[[n[t]]];const l=()=>{const e=[];return i.forEach(t=>{t[t.length-1].adjecent.forEach(i=>{if(n[i.index].index===a)r=t,n[i.index].direction=i.direction,r.push(n[i.index]);else if(0===n[i.index].visited&&!n[i.index].fill){n[i.index].visited=1;const a=we(t);a.push(n[i.index]),a[a.length-1].direction=i.direction,e.push(a)}})}),e};let o=0;do{if(++o>299&&console.log("time out!"),i=l(),r)return r;if(0===i.length)return console.log("path impossible!"),!1}while(!r&&o<300)})(e,t,a),c=r.speed;return o&&d&&d.length<=r.speed+1&&(c=d.length>r.speed?r.speed:d.length-1,s=Ie(l,i[a].stats)),d?(n=((e,t)=>{return Ee(e).withMutations(e=>{t.forEach(t=>{e.setIn([t.index,"path"],1)})})})(e,d=d.splice(0,c)),{grid:Object(ye.a)(n),result:d,attackResult:s}):null},clearPath:Ee,moveCharacter:(e,t,a)=>e.setIn([t.index,"fill"],"").setIn([t.index,"image"],"").setIn([t.index,"stats"],"").setIn([a.index,"image"],t.image).setIn([a.index,"fill"],t.fill).setIn([a.index,"stats"],t).setIn([a.index,"stats","index"],a.index),clearTile:(e,t)=>e.setIn([t,"image"],"").setIn([t,"stats"],"").setIn([t,"fill"],"").setIn([t,"sound"],"click"),updateCharacter:(e,t)=>e.setIn([t.index,"stats"],t.stats)},Te={up:"down",down:"up",left:"right",right:"left"},Re={moveAnimationBuilder:(e,t,a)=>{const r=a.attackResult;let n=" 0% {\n      top: 0%;\n      left: 0%;\n    }\n  ";const i=r?100/(e.length+3):100/e.length;let l,o=0,s=0;if(e.forEach((t,a)=>{l=e.length-1!==a||r?i*a:100,"up"===t.direction?o-=100:"down"===t.direction?o+=100:"left"===t.direction?s-=100:"right"===t.direction&&(s+=100),0!==a&&(n+=`\n        ${l}% {\n          top: ${o}%;\n          left: ${s}%;\n      }`)}),r){const t=e[e.length-1].adjecent.find(e=>e.index===a.defender.index).direction,r=Te[t],d=o,c=s;"up"===r?o-=50:"down"===r?o+=50:"left"===r?s-=50:"right"===r&&(s+=50),n+=`\n      ${l+=2*i}% {\n        top: ${o}%;\n        left: ${s}%;\n      }`,n+=`\n      ${l+=i/4}% {\n        top: ${o}%;\n        left: ${s}%;\n      }`,"up"===t?o-=90:"down"===t?o+=90:"left"===t?s-=90:"right"===t&&(s+=90),n+=`\n    ${l+=i/3}% {\n      top: ${o}%;\n      left: ${s}%;\n    }`,n+=`\n      100% {\n        top: ${d}%;\n        left: ${c}%;\n      }\n    `}return{animation:Object(h.d)(["",""],n),time:r?t*(e.length+3):t*(e.length-1)}},selected:Object(h.d)(["0%{transform:rotate(0deg);}33.2%{transform:rotate(-16deg);}83.18%{transform:rotate(8deg);}100%{transform:rotate(0deg);}"]),first:Object(h.d)(["0%{opacity:1;}50%{opacity:0;width:50px;min-width:50px;}100%{width:0px;min-width:0px;opacity:0;}"]),last:Object(h.d)(["0%{opacity:0;}100%{opacity:1;}"])},Se=e=>{let t=we(e);const a=t.shift();return[...t,a]},_e={sortCharacters:(e,t="initiative")=>{return we(e).sort((e,a)=>a[t]-e[t])},setNextCharacter:Se,findCharacters:e=>{const t=e.filter((e,t)=>"C"===e.fill).map(e=>e.stats),a=t.filter(e=>"human"===e.player),r=t.filter(e=>"ai"===e.player);return{allCharacters:t.toJS(),humanCharacters:a.toJS(),aiCharacters:r.toJS()}},updateCharacters:(e,t)=>{let a=Se(e.turnInfo.get("allCharacters"));const{allCharacters:r,humanCharacters:n,aiCharacters:i}=_e.findCharacters(t),l=r.map(e=>e.id);return{allCharacters:a=(a=a.filter(e=>l.includes(e.id))).map(e=>{const t=r.find(t=>t.id===e.id);return e=t}),aiCharacters:i,humanCharacters:n,activeCharacter:a[0]}}},je=(e,t)=>e-t>0?100:-50,Oe=(e,t)=>e-t<=0?200:0,qe=e=>10-e>0?20*(10-e):0,Ge=(e,t)=>10*(e+t),Pe=(e,t,a)=>{let r=[],n=!1;return a.forEach(a=>{const i=ke.startSearch(e,t.index,a.index,t);i&&(r.push({result:i,index:a.index,target:a,stats:t}),!n&&i.attackResult&&(n=!0))}),n&&(r=r.filter(e=>e.result.attackResult)),(e=>{return e.map(e=>{const t=e.stats,a=e.target;let r=0,n={},i=0;const l=je(t.attack,a.ac);i+=l,n.toHitChance=l;const o=qe(a.hp);i+=o,n.remainingHP=o;const s=Oe(a.hp,t.damage[1]);i+=s,n.canKill=s;const d=Ge(a.attack,a.damage[1]);return i+=d,n.threatLevel=d,r+=i,{...e,weight:i,calculatedWeight:r,weightBreakdown:n}})})(r)},Ne=(e,t,a)=>{const r=Pe(e,t,a);return r.length>0?(e=>{const t=e[e.length-1].calculatedWeight,a=xe(0,t);for(let r=0;r<e.length;r++)if(a-e[r].calculatedWeight<=0)return e[r].index})(r):null},He=h.c.div.withConfig({displayName:"styledCell__StyledCell",componentId:"sc-4x2wvu-0"})(["display:flex;position:relative;background:",";flex-basis:",";padding-top:",";cursor:",";box-shadow:",";"],_.glassTransparent,e=>e.basis,e=>e.basis,e=>"brown"===e.fill?"not-allowed":"pointer",j.standardInset),$e=h.c.div.withConfig({displayName:"styledCell__StyledCellContent",componentId:"sc-4x2wvu-1"})(["justify-content:center;align-items:center;display:flex;position:absolute;width:100%;height:100%;top:0;left:0;transition:all 400ms ease;background:",";&:hover{box-shadow:",";}"],e=>e.path?"rgba(255, 192, 203, 0.3)":"transparent",j.largeInset),Me={human:_.greenTransparent,ai:_.redMain},ze=(e,t)=>t&&t.animation?[t.animation,`${t.time}ms linear forwards`]:e?[Re.selected,"2s linear infinite"]:"",Be=h.c.div.withConfig({displayName:"styledCellContent__StyledCellContentWrapper",componentId:"nfkiq9-0"})(["position:relative;z-index:",";width:100%;height:100%;animation:"," ",";"],e=>e.animation?"200":"100",e=>ze(e.selected,e.animation)[0],e=>ze(e.selected,e.animation)[1]),Ae=h.c.div.withConfig({displayName:"styledCellContent__StyledCellContent",componentId:"nfkiq9-1"})(["position:relative;z-index:100;width:100%;height:100%;border-radius:50%;display:flex;justify-content:center;align-items:center;background:url(",") center center/cover no-repeat;box-shadow:",";transform:",";"],e=>S[e.image],e=>e.player?j.standard:"",e=>e.player?"scale(0.9)":""),De=h.c.div.withConfig({displayName:"styledCellContent__StyledIndicator",componentId:"nfkiq9-2"})(["width:90%;height:90%;left:5%;top:5%;position:absolute;border-radius:50%;background-color:",";"],e=>e.player?Me[e.player]:""),We=(h.c.div.withConfig({displayName:"styledCellContent__StyledCellHp",componentId:"nfkiq9-3"})(["position:absolute;display:flex;flex-direction:column;border-radius:50%;height:100%;width:100%;z-index:99999;overflow:hidden;& > div{flex:1;background-color:",";}"],_.redTransparent),h.c.div.withConfig({displayName:"styledHpOverlay__StyledHpOverlay",componentId:"sc-4imsd3-0"})(["position:absolute;top:0;left:0;display:flex;flex-direction:column;border-radius:50%;height:100%;width:100%;z-index:99999;overflow:hidden;"])),Fe=h.c.div.withConfig({displayName:"styledHpOverlay__StyledHpOverlayFill",componentId:"sc-4imsd3-1"})(["flex:1;background-color:",";"],e=>e.fill?_.redTransparent:"transparent"),Je=e=>{const{hp:t,maxHp:a}=e,r=[],n=a-t;for(let i=0;i<a;i++){const e=n>i?"true":"";r.unshift(l.a.createElement(Fe,{key:i,fill:e}))}return l.a.createElement(We,null,r)};Je.propTypes={hp:u.a.number.isRequired,maxHp:u.a.number.isRequired},Je.defaultProps={};var Le=Je;const Ue=e=>{const{cell:t,selected:a,grid:r,updateGrid:n,gameId:i}=e,{index:o,stats:s}=t,d=s&&s.hp?s.hp:null,c=s&&s.maxHp?s.maxHp:null,p=s&&s.player;if(t.attack){let e=r;setTimeout(()=>{e=e.setIn([o,"attack"],!1),n(e,i)},500)}return l.a.createElement(Be,{selected:a,animation:t.animation},l.a.createElement(Ae,{selected:a,image:t.image,attack:t.attack,player:p},d&&l.a.createElement(Le,{hp:d,maxHp:c})),l.a.createElement(De,{player:p}))};Ue.propTypes={cell:u.a.object.isRequired,selected:u.a.oneOfType([u.a.bool,u.a.number]),grid:u.a.object.isRequired,updateGrid:u.a.func.isRequired,gameId:u.a.number},Ue.defaultProps={selected:!1,gameId:null};var Xe=Object(o.b)(e=>({grid:e.GridReducer.grid}),e=>({updateGrid:t=>e(r.updateGrid(t))}))(Ue);const Ve=e=>{const{columns:t,cell:a,selected:r,onClick:n,onMouseEnter:i}=e,o=100/t+"%";let s="";return"S"===a.fill?s="lightgreen":"X"===a.fill&&(s="brown"),l.a.createElement(He,{basis:o,fill:s,image:a.terrain},l.a.createElement($e,{onClick:()=>{n()},selected:r,onMouseEnter:i,path:a.path},l.a.createElement(Xe,{cell:a,selected:r})))};Ve.propTypes={cell:u.a.object,columns:u.a.number.isRequired,selected:u.a.oneOfType([u.a.bool,u.a.number]),onClick:u.a.func.isRequired,onMouseEnter:u.a.func.isRequired},Ve.defaultProps={cell:{},selected:!1};var Ye=Object(o.b)(e=>({columns:e.ConfigReducer.settings.columns}),e=>({}))(Ve);var Ke=h.c.div.withConfig({displayName:"styledConsole__StyledConsole",componentId:"sc-13143ig-0"})(["display:flex;flex-direction:column;flex-wrap:nowrap;width:100%;margin-left:auto;height:300px;max-height:315px;padding:4px 8px;margin-top:auto;text-align:left;font-size:14px;overflow-y:scroll;box-shadow:",";border-radius:",";background-color:",";&::-webkit-scrollbar{-webkit-appearance:none;width:7px !important;}&::-webkit-scrollbar-thumb{border-radius:4px;background-color:",";box-shadow:",";}@media ","{width:calc(50% - 5px);}@media ","{height:calc(50% - 10px);width:100%;}"],j.standard,O,_.glassTransparent,_.gray,j.standard,P.small,P.medium);const Qe={human:"green",ai:"red"},Ze=e=>{const{action:t,gameInProgress:a}=e,[r,n]=Object(i.useState)([]);return Object(i.useEffect)(()=>{if(t&&a){let e="";const a=Qe[t.selected.stats.player],i=t.skipped,l=t.selected.stats,o=t.path,s=t.defender?t.defender.stats:null,d=t.attackResult?t.attackResult.attackResult:null,c=t.attackResult?t.attackResult.damageResult:null;i?e+=`<span style='color: ${a};'>${l.name}</span> SKIPPED turn `:(o.length-1>0&&(e+=`<span style='color: ${a};'>${l.name}</span> moved ${o.length-1} tile${o.length-1>1?"s":""}${t.defender?"<br>":""}`),t.defender&&(e+=`<span style='color: ${a};'>${l.name}</span> attacked <span style='color: ${Qe[s.player]};'>${s.name}</span><br>`,e+=`${l.name} rolled ${d.attack} 1d20(${d.attackRoll}) + ${d.attackBonus} vs. AC:${d.defenderAC} and ${d.isHit?`<span style='color: purple;'>${c.isDead?"KILLED!":"HIT!"} for ${c.damage} damage.</span>`:"<span style='color: purple;'>MISSED!</span>"}`)),n([e+="<br><br>",...r])}else n([])},[t]),l.a.createElement(Ke,null,r.map((e,t)=>l.a.createElement("p",{key:t,dangerouslySetInnerHTML:{__html:e}})))};Ze.propTypes={action:u.a.object,selected:u.a.oneOfType([u.a.bool,u.a.number]),gameInProgress:u.a.bool.isRequired},Ze.defaultProps={selected:!1,action:{}};var et=Ze;var tt=h.c.div.withConfig({displayName:"styledSidebarInfo__StyledSidebarInfo",componentId:"sc-18el9y4-0"})(["display:flex;width:100%;height:300px;box-shadow:",";border-radius:",";background-color:",";padding:4px 8px;@media ","{width:calc(50% - 5px);}@media ","{height:50%;width:100%;}"],j.standard,O,_.glass,P.small,P.medium);const at=h.c.div.withConfig({displayName:"styledCharacterInfo__StyledCharacterInfo",componentId:"sc-1i7a28w-0"})(["width:100%;display:flex;flex-direction:column;font-family:",";padding:0 10px;h2{font-size:24px;font-weight:bolder;text-shadow:2px 2px 2px ",";margin:10px auto;}"],N,e=>"ai"===e.player?_.redMain:_.greenTransparent),rt=h.c.div.withConfig({displayName:"styledCharacterInfo__StyledCharacterInfoStat",componentId:"sc-1i7a28w-1"})(["width:auto;display:flex;align-items:center;justify-content:space-between;font-weight:bold;margin-top:5px;padding:0;font-weight:bolder;font-size:16px;span{display:flex;justify-content:center;align-items:center;border-radius:50%;width:26px;height:26px;box-shadow:",";margin-left:10px;font-size:16px;}"],e=>"ai"===e.player?j.standarInsetWithColor(_.redMain):j.standarInsetWithColor(_.greenTransparent)),nt=h.c.div.withConfig({displayName:"styledCharacterInfo__StyledCharacterInfoTitle",componentId:"sc-1i7a28w-2"})([""]),it=h.c.div.withConfig({displayName:"styledCharacterInfo__StyledCharacterInfoImage",componentId:"sc-1i7a28w-3"})(["position:relative;width:70px;padding-top:70px;border-radius:50%;background:url(",") center center/cover no-repeat;margin:5px auto;box-shadow:",";"],e=>S[e.image],j.standardInset),lt=e=>{const{damage:t,name:a,speed:r,image:n,hp:i,maxHp:o,attack:s,ac:d,player:c}=e;return l.a.createElement(at,{player:c},l.a.createElement(nt,null,l.a.createElement(it,{image:n},l.a.createElement(Le,{hp:i,maxHp:o})),l.a.createElement("h2",null,a)),l.a.createElement(rt,{player:c},"HP:",l.a.createElement("span",null,i,"/",o)),l.a.createElement(rt,{player:c},"Attack:",l.a.createElement("span",null,s)),l.a.createElement(rt,{player:c},"AC:",l.a.createElement("span",null,d)),l.a.createElement(rt,{player:c},"Speed:",l.a.createElement("span",null,r)),l.a.createElement(rt,{player:c},"Damage:",l.a.createElement("span",null,t[0]+"-"+t[1])))};lt.propTypes={name:u.a.string.isRequired,speed:u.a.number.isRequired,image:u.a.string.isRequired,hp:u.a.number.isRequired,attack:u.a.number.isRequired,ac:u.a.number.isRequired,player:u.a.string.isRequired,maxHp:u.a.number.isRequired,damage:u.a.array.isRequired},lt.defaultProps={};var ot=lt;const st=e=>{const{activeCharacter:t,hoverCharacter:a}=e;return l.a.createElement(l.a.Fragment,null,l.a.createElement(tt,null,t.name&&l.a.createElement(ot,{name:t.name,attack:t.attack,hp:t.hp,maxHp:t.maxHp,ac:t.ac,speed:t.speed,image:t.image,player:t.player,damage:t.damage}),a.name&&l.a.createElement(ot,{name:a.name,attack:a.attack,hp:a.hp,maxHp:a.maxHp,ac:a.ac,speed:a.speed,image:a.image,player:a.player,damage:a.damage})),";")};st.propTypes={gameInProgress:u.a.bool,activeCharacter:u.a.object.isRequired,hoverCharacter:u.a.object.isRequired},st.defaultProps={};var dt=st;var ct=h.c.div.withConfig({displayName:"styledSidebar__StyledSidebar",componentId:"bobnt5-0"})(["display:flex;flex-direction:column;flex-wrap:nowrap;width:100%;padding-left:0;margin-top:20px;@media ","{flex-direction:row;}@media ","{flex-direction:column;width:33.3%;margin-top:0px;padding-left:10px;}"],P.small,P.medium);const pt=e=>{const{action:t,gameInProgress:a,activeCharacter:r,hoverCharacter:n}=e;return l.a.createElement(ct,null,l.a.createElement(dt,{gameInProgress:a,activeCharacter:r,hoverCharacter:n}),l.a.createElement(et,{action:t,gameInProgress:a}))};pt.propTypes={action:u.a.object,gameInProgress:u.a.bool.isRequired,activeCharacter:u.a.object.isRequired,hoverCharacter:u.a.object.isRequired},pt.defaultProps={action:null};var mt=pt;const ut=h.c.div.withConfig({displayName:"styledGridHeader__StyledGridHeader",componentId:"rq1y7p-0"})(["display:flex;width:100%;align-items:center;margin-bottom:10px;flex-direction:column-reverse;@media ","{border:none;flex-direction:row;}"],P.medium),ht=e=>"first"===e?[Re.first,"800ms ease-in forwards"]:"last"===e?[Re.last,"300ms ease-in forwards"]:"",gt=h.c.div.withConfig({displayName:"styledTurnBar__StyledTitle",componentId:"sc-9at580-0"})(["padding:0 5px 0 10px;line-height:1.3;font-weight:bold;font-size:14px;width:60px;min-width:60px;font-family:",";"],H),ft=h.c.div.withConfig({displayName:"styledTurnBar__StyledTurnBar",componentId:"sc-9at580-1"})(["display:flex;border:1px solid darkgray;width:100%;align-items:center;height:50px;overflow-x:auto;overflow-y:hidden;box-shadow:",";border-radius:",";background-color:",";margin-bottom:10px;&::-webkit-scrollbar{-webkit-appearance:none;width:7px !important;}&::-webkit-scrollbar-thumb{border-radius:4px;background-color:",";box-shadow:",";}@media ","{height:60px;width:66.6%;margin-bottom:0;}"],j.standard,O,_.glassTransparent,_.gray,j.standard,P.medium),bt=Object(h.c)(Ae).withConfig({displayName:"styledTurnBar__StyledTBCellContent",componentId:"sc-9at580-2"})([""]),yt=Object(h.c)(De).withConfig({displayName:"styledTurnBar__StyledTBIndicator",componentId:"sc-9at580-3"})([""]),xt=Object(h.c)(Be).withConfig({displayName:"styledTurnBar__StyledTBContentWrapper",componentId:"sc-9at580-4"})(["position:relative;width:50px;min-width:50px;height:50px;animation:'';animation:"," ",";"],e=>ht(e.moved)[0],e=>ht(e.moved)[1]),wt=e=>{const{allCharacters:t,selected:a,gameInProgress:r}=e,[n,o]=Object(i.useState)(null);Object(i.useEffect)(()=>{t.length>0?n?async function(){let e=we(n);e[0].moved="first",o(e),await ve(1e3),(e=we(t))[e.length-1].moved="last",o(e),await ve(500),o(t)}():o(t):o(null)},[t]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(ft,null,l.a.createElement(gt,null,"Turn",l.a.createElement("br",null),"Order:"),r&&(e=>{if(e)return e.map((e,t)=>{const r=e.index===a,n=e.hp,i=e.maxHp;return l.a.createElement(xt,{selected:r,animation:e.animation,key:t,moved:e.moved},l.a.createElement(bt,{selected:r,image:e.image,player:e.player}),l.a.createElement(Le,{hp:n,maxHp:i}),l.a.createElement(yt,{player:e.player}))})})(n)))};wt.propTypes={selected:u.a.oneOfType([u.a.bool,u.a.number]),allCharacters:u.a.array,gameInProgress:u.a.bool.isRequired},wt.defaultProps={allCharacters:[],selected:!1};var vt=Object(o.b)(e=>({allCharacters:e.TurnReducer.turnInfo.get("allCharacters")}),e=>({}))(wt);const Ct=h.c.div.withConfig({displayName:"styledControlBar__StyledControlBarWrapper",componentId:"kjj35j-0"})(["width:100%;padding-bottom:10px;@media ","{width:33.3%;padding-bottom:0;padding-left:10px;}"],P.medium),It=h.c.div.withConfig({displayName:"styledControlBar__StyledControlBar",componentId:"kjj35j-1"})(["display:flex;align-items:center;justify-content:space-around;height:50px;box-shadow:",";border-radius:",";background-color:",";@media ","{height:60px;}"],j.standard,O,_.glass,P.medium),Et=h.c.div.withConfig({displayName:"styledSpinner__StyledSpinner",componentId:"sc-4rgba1-0"})(["transform:scale(0.4);position:absolute;.lds-roller{display:inline-block;position:relative;width:80px;height:80px;}.lds-roller div{animation:lds-roller 1.2s cubic-bezier(0.5,0,0.5,1) infinite;transform-origin:40px 40px;}.lds-roller div:after{content:' ';display:block;position:absolute;width:9px;height:9px;border-radius:50%;background:",";box-shadow:",";margin:-4px 0 0 -4px;}.lds-roller div:nth-child(1){animation-delay:-0.036s;}.lds-roller div:nth-child(1):after{top:63px;left:63px;}.lds-roller div:nth-child(2){animation-delay:-0.072s;}.lds-roller div:nth-child(2):after{top:68px;left:56px;}.lds-roller div:nth-child(3){animation-delay:-0.108s;}.lds-roller div:nth-child(3):after{top:71px;left:48px;}.lds-roller div:nth-child(4){animation-delay:-0.144s;}.lds-roller div:nth-child(4):after{top:72px;left:40px;}.lds-roller div:nth-child(5){animation-delay:-0.18s;}.lds-roller div:nth-child(5):after{top:71px;left:32px;}.lds-roller div:nth-child(6){animation-delay:-0.216s;}.lds-roller div:nth-child(6):after{top:68px;left:24px;}.lds-roller div:nth-child(7){animation-delay:-0.252s;}.lds-roller div:nth-child(7):after{top:63px;left:17px;}.lds-roller div:nth-child(8){animation-delay:-0.288s;}.lds-roller div:nth-child(8):after{top:56px;left:12px;}@keyframes lds-roller{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}"],_.white,j.standard),kt=e=>l.a.createElement(Et,null,l.a.createElement("div",{className:"lds-roller"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)));kt.propTypes={},kt.defaultProps={};var Tt=kt;const Rt=e=>{const{endGame:t,startGame:a,skipTurn:r,gameInProgress:n,isAiTurn:o}=e,[s,d]=Object(i.useState)(!1);return l.a.createElement(Ct,null,l.a.createElement(It,null,n&&l.a.createElement(V,{type:"secondary",func:()=>{t(),o&&(d(!0),setTimeout(()=>{d(!1)},3500))},text:"Surrender"}),!n&&l.a.createElement(V,{disabled:s,type:"secondary",func:a,text:"Start"}),(s||o&&n)&&l.a.createElement(Tt,null),l.a.createElement(V,{type:"secondary",disabled:!n||o,func:r,text:"Skip Turn"})))};Rt.propTypes={endGame:u.a.func.isRequired,startGame:u.a.func.isRequired,skipTurn:u.a.func.isRequired,gameInProgress:u.a.bool.isRequired,isAiTurn:u.a.bool},Rt.defaultProps={isAiTurn:!1};var St=Rt;const _t=e=>{const{grid:t,selected:a,startGame:r,endGame:n,skipTurn:o,gameInProgress:s}=e,[d,c]=Object(i.useState)(!1);return Object(i.useEffect)(()=>{const e=t.getIn([a]);c(!a||!e||"ai"===t.getIn([a]).stats.player)},[a]),l.a.createElement(ut,null,l.a.createElement(vt,{grid:t,selected:a,gameInProgress:s}),l.a.createElement(St,{isAiTurn:d,startGame:r,endGame:n,skipTurn:o,gameInProgress:s}))};_t.propTypes={grid:u.a.object.isRequired,selected:u.a.oneOfType([u.a.bool,u.a.number]),endGame:u.a.func.isRequired,startGame:u.a.func.isRequired,skipTurn:u.a.func.isRequired,gameInProgress:u.a.bool.isRequired},_t.defaultProps={selected:!1};var jt=_t;const Ot=e=>{const{grid:t,updateGrid:a,settings:r,createGrid:n,destroyGrid:o,activeCharacter:s,allCharacters:d,startTurn:c,nextMove:p,resetTurn:m,humanCharacters:u,aiCharacters:h}=e,[g,f]=Object(i.useState)(),[b,y]=Object(i.useState)(!1),[x,w]=Object(i.useState)({}),[v,C]=Object(i.useState)(!1),[I,E]=Object(i.useState)(),[k,T]=Object(i.useState)({}),[R,S]=Object(i.useState)(null),_=Object(i.useRef)(!1);Object(i.useEffect)(()=>{d.length>0&&(h.length<1&&(alert("You win!"),q()),u.length<1&&(alert("You lose!"),q()))},[d]),Object(i.useEffect)(()=>{s&&s.name&&P(t.get(s.index))},[s]),Object(i.useEffect)(()=>{0===d.length&&t.size>0&&c(t,R)},[t]),Object(i.useEffect)(()=>{if("ai"===s.player&&x&&g){const e=Ne(t,s,u);if(e||0===e){const a=H(t.get(e));a.path.length>0&&setTimeout(()=>{N(a.path,a.attackResult,a.defenderIndex)},1300)}else setTimeout(()=>{E({selected:t.getIn([g]),skipped:!0}),O(t,R)},500)}},[x]);const j=(e,t)=>{_.current&&a(e,t)},O=(e,t)=>{_.current&&p(e,t)},q=()=>{_.current=!1,E(),o(),m()},G=()=>{y(!1),f(null),w({}),j(ke.clearPath(t,R))},P=e=>{y(!0),f(e.index),w(e.stats),j(ke.clearPath(t,R))};async function N(e,a,r){const n=a&&a.attackResult.isHit;C(!0),j(t.setIn([g,"animation"],Re.moveAnimationBuilder(e,300,{attackResult:a,defender:t.getIn([r])})),R);const i=a?900:0;await ve(300*e.length+i),G();let l=t;l=ke.moveCharacter(l,x,l.get(e[e.length-1].index));let o=a?l.getIn([r]):null;o&&(l=l.setIn([o.index,"attack"],!0)),n&&(o.stats.hp=a.damageResult.hp,l=o.stats.hp>0?ke.updateCharacter(l,o):ke.clearTile(l,r)),E({selected:t.getIn([g]),path:e,attackResult:a,defender:o}),j(l,R),await ve(a?500:0),C(!1),O(l,R)}const H=e=>{const a=ke.startSearch(t,g,e.index,x);let r=!1,n=[],i=!1;return a&&a.grid&&(j(a.grid,R),n=a.result,i=a.attackResult,r=!0),{moveAllowed:r,path:n,attackResult:i,defenderIndex:e.index}};return l.a.createElement(pe,null,l.a.createElement(jt,{grid:t,selected:g,startGame:()=>{const e=Date.now();S(e),_.current=!0,n(r,e),m(e)},endGame:q,skipTurn:()=>{"ai"!==s.player&&(E({selected:t.getIn([g]),skipped:!0}),O(t,R))},gameInProgress:_.current}),l.a.createElement(ce,{empty:0===d.length},d.length>0?t.map(e=>{const t=e.index===g;return l.a.createElement(Ye,{key:e.index,cell:e,selected:t,onClick:()=>{(e=>{if(console.log("cell",e),!b||v||"ai"===s.player){if("C"!==e.fill);}else{const t=H(e);"X"!==e.fill&&t.path.length>0&&t.moveAllowed&&N(t.path,t.attackResult,t.defenderIndex)}})(e)},onMouseEnter:()=>{e&&e.stats&&e.stats.name&&e.stats.player?T(e.stats):T({}),b&&!v&&"ai"!==s.player&&H(e)}})}):null),l.a.createElement(mt,{action:I,gameInProgress:_.current,activeCharacter:s,hoverCharacter:k}))};Ot.propTypes={updateGrid:u.a.func.isRequired,grid:u.a.object.isRequired,settings:u.a.object.isRequired,createGrid:u.a.func.isRequired,destroyGrid:u.a.func.isRequired,activeCharacter:u.a.object,allCharacters:u.a.array.isRequired,startTurn:u.a.func.isRequired,nextMove:u.a.func.isRequired,resetTurn:u.a.func.isRequired,humanCharacters:u.a.array,aiCharacters:u.a.array},Ot.defaultProps={activeCharacter:null,humanCharacters:[],aiCharacters:[]};var qt=Object(o.b)(e=>({grid:e.GridReducer.grid,settings:e.ConfigReducer.settings,turnInfo:e.TurnReducer.turnInfo,activeCharacter:e.TurnReducer.turnInfo.get("activeCharacter"),allCharacters:e.TurnReducer.turnInfo.get("allCharacters"),humanCharacters:e.TurnReducer.turnInfo.get("humanCharacters"),aiCharacters:e.TurnReducer.turnInfo.get("aiCharacters")}),e=>({updateGrid:(t,a)=>e(r.updateGrid(t,a)),createGrid:(t,a)=>e(r.createGrid(t,a)),destroyGrid:()=>e(r.destroyGrid()),startTurn:(t,a)=>e(n.startTurn(t,a)),nextMove:(t,a)=>e(n.nextMove(t,a)),resetTurn:()=>e(n.resetTurn())}))(Ot);const Gt=e=>{const{destroyGrid:t,resetTurn:a}=e;return Object(i.useEffect)(()=>(t(),a(),function(){t(),a()})),l.a.createElement(W,null,l.a.createElement(qt,null))};Gt.propTypes={destroyGrid:u.a.func.isRequired,resetTurn:u.a.func.isRequired},Gt.defaultProps={};var Pt=Object(o.b)(e=>({}),e=>({destroyGrid:()=>e(r.destroyGrid()),resetTurn:()=>e(n.resetTurn())}))(Gt);const Nt=h.b`
    body {
        text-align: center;
        color: ${_.black};
        font-family: ${N};
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    ul {
        list-style: none;
    }

    html, body, div, span, applet, object, iframe,
    h1, h2, h3, h4, h5, h6, p, blockquote, pre,
    a, abbr, acronym, address, big, cite, code,
    del, dfn, em, img, ins, kbd, q, s, samp,
    small, strike, strong, sub, sup, tt, var,
    b, u, i, center,
    dl, dt, dd, ol, ul, li,
    fieldset, form, label, legend,
    table, caption, tbody, tfoot, thead, tr, th, td,
    article, aside, canvas, details, embed, 
    figure, figcaption, footer, header, hgroup, 
    menu, nav, output, ruby, section, summary,
    time, mark, audio, video {
        margin: 0;
        padding: 0;
        border: 0;
        font-size: 100%;
        font: inherit;
        vertical-align: baseline;
    }

    /* HTML5 display-role reset for older browsers */
    article, aside, details, figcaption, figure, 
    footer, header, hgroup, menu, nav, section {
        display: block;
    }

    body {
        line-height: 1;
    }

    ol, ul {
        list-style: none;
    }

    blockquote, q {
        quotes: none;
    }

    blockquote:before, blockquote:after,
    q:before, q:after {
        content: '';
        content: none;
    }

    table {
        border-collapse: collapse;
        border-spacing: 0;
    }

    a,
    a:visited,
    a:focus,
    a:hover {
        text-decoration: none;
        color: inherit;
    }
`;var Ht=function(){return l.a.createElement(c.a,null,l.a.createElement(c.a,null,l.a.createElement(h.a,{theme:$},l.a.createElement(Nt,null),l.a.createElement(ie,null,l.a.createElement(p.c,null,l.a.createElement(p.a,{exact:!0,path:J.about,component:de}),l.a.createElement(p.a,{exact:!0,path:J.battle,component:Pt}),l.a.createElement(p.a,{exact:!0,path:J.home,component:oe}),l.a.createElement(p.a,null,l.a.createElement("h1",null,"Page not found")))))))},$t=a(13),Mt=a(37),zt=a.n(Mt);const Bt={gameId:null,grid:new ye.a([])};var At=(e=Bt,t)=>{switch(t.type){case"UPDATE_GRID":return 0===e.grid.size?{...e}:e.gameId!==t.gameId?{...e}:{...e,grid:t.grid};case"CREATE_GRID":return{...e,grid:ke.makeGrid(t.settings),gameId:t.gameId};case"DESTROY_GRID":return{...e,grid:new ye.a([])};default:return e}};const Dt={muted:!0,settings:{rows:10,columns:10,fill:{humanCharacters:[{id:1,name:"Victor",type:"hero",speed:6,image:"warrior",fill:"C",maxHp:8,hp:8,attack:4,ac:0,damage:[2,6],player:"human",initiative:16},{id:4,name:"Fortuna",type:"hero",speed:6,image:"fortuna",fill:"C",maxHp:5,hp:5,attack:8,ac:10,damage:[1,4],player:"human",initiative:24}],aiCharacters:[{id:2,name:"Goblin",type:"enemy",speed:5,image:"goblin",fill:"C",maxHp:6,hp:6,attack:0,ac:8,damage:[1,4],player:"ai",initiative:18},{id:3,name:"Golem",type:"enemy",speed:5,image:"golem",fill:"C",maxHp:8,hp:8,attack:-2,ac:8,damage:[2,6],player:"ai",initiative:12}],id:0,assignIndexes(e,t){let a=e;return t.map(e=>{const t=a.splice(xe(0,a.length-1),1)[0];return e.index=t,e.id=++this.id,e})},rows:10,obstacles(){return Math.round(this.rows*(this.rows/2.5)-1.5*this.rows)},characters(){const e=this.assignIndexes([3,4,5,6,7],this.humanCharacters);let t=we(this.aiCharacters);for(let a=0;a<xe(2,3);++a)t.unshift(we(this.aiCharacters[xe(0,1)]));return t=this.assignIndexes([93,94,95,96,97,84,85,86],t),[...e,...t]}}}};var Wt=(e=Dt,t)=>{switch(t.type){case"TOGGLE_SOUND":return{...e,muted:t.muted};default:return e}};const Ft={gameId:null,turnInfo:new ye.b({currentPlayer:null,activeCharacter:{},turnOrder:[],allCharacters:[],humanCharacters:[],aiCharacters:[]})};var Jt=(e=Ft,t)=>{switch(t.type){case"START_TURN":{let{allCharacters:a,humanCharacters:r,aiCharacters:n}=_e.findCharacters(t.grid);a=_e.sortCharacters(a);let i=e.turnInfo;return i=i.setIn(["allCharacters"],a).setIn(["humanCharacters"],r).setIn(["aiCharacters"],n).setIn(["activeCharacter"],a[0]),{...e,turnInfo:i,gameId:t.gameId}}case"NEXT_MOVE":{if(0===e.turnInfo.get("allCharacters").length)return{...e};if(e.gameId!==t.gameId)return{...e};let{allCharacters:a,humanCharacters:r,aiCharacters:n,activeCharacter:i}=_e.updateCharacters(e,t.grid),l=e.turnInfo;return l=l.setIn(["allCharacters"],a).setIn(["humanCharacters"],r).setIn(["aiCharacters"],n).setIn(["activeCharacter"],i),{...e,turnInfo:l}}case"RESET_TURN":{const a=new ye.b({currentPlayer:null,activeCharacter:{},turnOrder:[],allCharacters:[],humanCharacters:[],aiCharacters:[]});return{...e,turnInfo:a,gameId:t.gameId}}default:return e}},Lt=Object($t.c)({GridReducer:At,ConfigReducer:Wt,TurnReducer:Jt});const Ut=Object($t.d)(Lt,Object($t.a)(zt.a));d.a.render(l.a.createElement(o.a,{store:Ut},l.a.createElement(Ht,null)),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.6f3426f6.chunk.js.map